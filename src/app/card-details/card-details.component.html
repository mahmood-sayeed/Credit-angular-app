
<div class="card">
  <div class="card-header">
    {{pageTitle}}
  </div>
  <div class="card-body">
    <form novalidate
          (ngSubmit)="saveCard()"
          [formGroup]="cardForm">
      <fieldset>
        <div class="form-group row">
          <label class="col-md-3 col-form-label"
                 for="cardNumberId">Credit Card Number</label>

          <div class="col-md-9">
            <input [ngClass]="{'is-invalid': displayMessage.cardNumber }"
                   class="form-control"
                   id="cardNumberId"
                   type="text"
                   placeholder="Number (required)"
                   formControlName="cardNumber"
                   (blur)="blur()"
                   required />
            <span class="invalid-feedback"
                  *ngIf="displayMessage.cardNumber">
              {{displayMessage.cardNumber}}
            </span>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-md-3 col-form-label"
                 for="cardHolderId">Card Holder</label>

          <div class="col-md-9">
            <input [ngClass]="{'is-invalid': displayMessage.cardHolder}"
                   class="form-control"
                   id="cardHolderId"
                   type="text"
                   placeholder="Full Name (required)"
                   formControlName="cardHolder"
                   (blur)="blur()"
                   required />
            <span class="invalid-feedback"
                  *ngIf="displayMessage.cardHolder">
              {{displayMessage.cardHolder}}
            </span>
          </div>
        </div>

        <div class="form-group row">
            <label class="col-md-3 col-form-label"
                   for="expirationDateId">Expiration Date</label>
  
            <div class="col-md-9">
              <input [ngClass]="{'is-invalid': displayMessage.expirationDate}"
                     class="form-control"
                     id="expirationDateId"
                     type="date"
                     placeholder="Expiration Date (required)"
                     formControlName="expirationDate"
                     min={{today}}
                     (blur)="blur()"
                     required />
              <span class="invalid-feedback"
                    *ngIf="displayMessage.expirationDate">
                {{displayMessage.expirationDate}}
              </span>
            </div>
          </div>  

        <div class="form-group row">
          <label class="col-md-3 col-form-label"
                 for="securityCodeId">Security Code - CCV</label>

          <div class="col-md-9">
            <input [ngClass]="{'is-invalid': displayMessage.securityCode}"
                   class="form-control"
                   id="securityCodeId"
                   type="text"
                   maxlength="3"
                   placeholder="CCV (optional)"
                   formControlName="securityCode" />
            <span class="invalid-feedback"
                  *ngIf="displayMessage.securityCode">
              {{displayMessage.securityCode}}
            </span>
          </div>
        </div>

        <div class="form-group row">
            <label class="col-md-3 col-form-label"
                   for="amountId">Amount</label>
  
            <div class="col-md-9">
              <input [ngClass]="{'is-invalid': displayMessage.amount}"
                     class="form-control"
                     id="amountId"
                     type="number"
                     min="1"
                     placeholder="Amount (required)"
                     formControlName="amount"
                     required />
              <span class="invalid-feedback"
                    *ngIf="displayMessage.amount">
                {{displayMessage.amount}}
              </span>
            </div>
          </div>

        <div class="form-group">
          <div class="col-md-10 col-md-offset-2">
            <span>
              <button class="btn btn-primary"
                      type="submit"
                      style="width:80px;margin-right:10px"
                      [disabled]="!cardForm.valid || !cardForm.dirty">
                Save
              </button>
            </span>
          </div>
        </div>
      </fieldset>
    </form>
  </div>
</div>
<div *ngIf="errorMessage"
     class="alert alert-danger">
  Error: {{ errorMessage }}
</div>
<div *ngIf="successMessage"
     class="alert alert-success">
  Success: {{ successMessage }}
</div>